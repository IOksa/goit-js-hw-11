{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,oDAQMC,EAAW,2BACXC,EAAU,qCACZC,EAAU,EACVC,EAAY,GAGVC,EAAK,CACPC,KAAMC,SAASC,cAAc,gBAC7BC,MAAOF,SAASC,cAAc,iBAC9BE,IAAKH,SAASC,cAAc,YAC5BG,YAAaJ,SAASC,cAAc,eAKpCI,EAAU,IAAIC,EAAAC,GAAJ,CAAmB,c,SA4BlBC,I,OAAAC,EAAUC,MAAAC,KAAAC,U,UAAVH,I,OAAAA,EAAfH,EAAAd,EAAA,CAAAc,EAAAO,GAAAC,MAAA,SAAAC,I,IACUC,E,yEAAAA,EAAS,IAAIC,gBAAgB,CAC/BC,IAAKvB,EACLwB,EAAGtB,EACHuB,WAAY,QACZC,YAAa,aACbC,YAAY,EACZC,SA9CO,GA+CPC,KAAM5B,I,SAIG6B,EAAAC,QAAMC,IAAI,GAAeC,OAAZlC,EAAS,KAAUkC,OAAPZ,I,oFAZjBN,MAAAC,KAAAC,U,CAkBzB,SAASiB,EAAmBC,GAExB,GAAqC,IAAjCA,EAAcC,KAAKC,KAAKC,OACxBC,EAAAC,OAAOC,QAAQ,gFAEf,CACA,IAAMC,EAAgCP,EAAcC,KAAKC,KA6BjDM,KAAI,SAAAC,G,IAAEC,EAAaD,EAAbC,cAAeC,EAAYF,EAAZE,aAAoBC,GAAFH,EAAJI,KAAWJ,EAALG,OAAOE,EAAKL,EAALK,MAAOC,EAAQN,EAARM,SAAUC,EAASP,EAATO,U,MACzE,wFAIuClB,OAD5BY,EAAc,8EAObZ,OAN2Ba,EAAa,0MAUxCb,OAJAgB,EAAM,0GAQNhB,OAJAc,EAAM,6GAQNd,OAJAiB,EAAS,8GAICjB,OAAVkB,EAAU,wD,IAGfC,KAAK,IAnDZ,GAHAjD,EAAKK,IAAI6C,mBAAmB,YAAaX,GACzChC,EAAQ4C,UAELrD,EAAU,EAAE,CAEb,IAAQsD,EAAuBlD,SAC9BC,cAAc,YACdkD,kBAAkBC,wBAFXC,OAIRC,OAAOC,SAAS,CAChBC,IAAkB,EAAbN,EAAe,GACpBO,SAAU,WAGR,IAAMC,EA9EH,GA8Ec9D,EACjBsC,EAAAC,OAAOwB,KAAK,oBAA+B/B,OAAX8B,EAAW,Y,CAG5C9D,EAAUkC,EAAcC,KAAK6B,UAlFzB,GAmFH9D,EAAKM,YAAYyD,QAAS,GAE1B/D,EAAKM,YAAYyD,QAAS,EAC1B3B,EAAAC,OAAOwB,KAAK,8D,EAzExB7D,EAAKM,YAAYyD,QAAO,EAExB/D,EAAKC,KAAK+D,iBAAiB,UAG3B,SAAsBC,GAClBA,EAAMC,iBACNlE,EAAKM,YAAYyD,QAAO,EAExBjE,EAAU,EACVE,EAAKK,IAAI8D,UAAU,GAEnB,IAAMlE,EAAOgE,EAAMG,cAGF,MAFjBrE,EAAcE,EAAKoE,SAASC,YAAYC,MAAMC,QAG5C9D,IACC+D,KAAK1C,GACL2C,OAAM,SAAAC,G,OAAKvC,EAAAC,OAAOC,QAAQ,+B,IAG3BF,EAAAC,OAAOC,QAAQ,qB,IAlBrBtC,EAAKM,YAAY0D,iBAAiB,SAyGlC,WACIlE,GAAW,EACXY,IACC+D,KAAK1C,GACL2C,OAAM,SAAAC,G,OAAKvC,EAAAC,OAAOC,QAAQ,+B","sources":["src/buttonLoadMore.js"],"sourcesContent":["import axios from 'axios';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\n\n// Описаний в документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"35857316-b0404474f9c8f0cfe824c51d8\";\nlet countPage=1;\nlet searchQuery=\"\";\nlet queryLimit=40;\n\nconst refs={\n    form: document.querySelector('#search-form'),\n    input: document.querySelector('.search-input'),\n    div: document.querySelector(\".gallery\"),\n    loadMoreBtn: document.querySelector('.load-more'),\n    \n}\n\n\nlet gallery = new SimpleLightbox('.gallery a');\n\nrefs.loadMoreBtn.hidden=true;\n\nrefs.form.addEventListener('submit', onFormSubmit);\nrefs.loadMoreBtn.addEventListener('click', onClickLoadMore)\n\nfunction onFormSubmit(event){\n    event.preventDefault();\n    refs.loadMoreBtn.hidden=true;\n\n    countPage=1;\n    refs.div.innerHTML=\"\";\n\n    const form = event.currentTarget;\n    searchQuery = form.elements.searchQuery.value.trim();\n    \n    if(searchQuery!==\"\"){\n      fetchQuery()\n      .then(checkQueryResponse)\n      .catch(err=>Notify.failure('Ooops! Something went wrong!'));\n    }\n    else{\n      Notify.failure('Empty search input');\n    }\n  \n}\n\nasync function fetchQuery(){\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: searchQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: queryLimit,\n        page: countPage,\n\n    });\n\n    return await axios.get(`${BASE_URL}?${params}`);\n    \n    // return await axios.get(`${BASE_URL}?key=${API_KEY}&q=${searchQuery}&image_type=photo&orientation=horizontal&safesearch=true`);\n    \n}\n\nfunction checkQueryResponse(queryResponse){\n    \n    if (queryResponse.data.hits.length===0){\n        Notify.failure('Sorry, there are no images matching your search query. Please try again.');\n    }\n    else{\n        const markup=createImageGalleryMarkup(queryResponse.data.hits);\n        refs.div.insertAdjacentHTML('beforeend', markup);\n        gallery.refresh();\n        \n        if(countPage>1){\n// плавне прокручування сторінки після запиту і відтворення кожної наступної групи зображень\n          const { height: cardHeight } = document\n          .querySelector(\".gallery\")\n          .firstElementChild.getBoundingClientRect();\n\n          window.scrollBy({\n          top: cardHeight * 2-70,\n          behavior: \"smooth\",\n          });\n//////////////////////////////////////////////////////////////////////////////\n            const countImage=countPage*queryLimit;\n            Notify.info(`Hooray! We found ${countImage} images.`);\n        }\n\n        if(countPage<queryResponse.data.totalHits/queryLimit){\n            refs.loadMoreBtn.hidden = false;\n        }else{\n            refs.loadMoreBtn.hidden = true;\n            Notify.info(\"We're sorry, but you've reached the end of search results.\");\n        }\n    }\n}\n\nfunction createImageGalleryMarkup(arr){\n     return arr.map(({largeImageURL, webformatURL, tags, views, likes, comments, downloads})=>\n        `<div class=\"photo-card\">\n       \n        <div class=\"img-thumb\">\n        <a href=\"${largeImageURL}\" class=\"photo-card__link\">\n        <img class=\"photo-card__image\"\" src=\"${webformatURL}\" alt=\"{tags}\" loading=\"lazy\" data-source=\"large-image.jpg\"/>\n        </a>\n        </div>\n        <div class=\"info\">\n          <p class=\"info-item\">\n            <b>Likes</b>\n            <span>${likes}</span>\n          </p>\n          <p class=\"info-item\">\n            <b>Views</b>\n            <span>${views}</span>\n          </p>\n          <p class=\"info-item\">\n            <b>Comments</b>\n            <span>${comments}</span>\n          </p>\n          <p class=\"info-item\">\n            <b>Downloads</b>\n            <span>${downloads}</span>\n          </p>\n        </div>\n      </div>`).join('');\n}\n\nfunction onClickLoadMore(){\n    countPage+=1;\n    fetchQuery()\n    .then(checkQueryResponse)\n    .catch(err=>Notify.failure('Ooops! Something went wrong!'));\n\n}"],"names":["$bpxeT","parcelRequire","$e008f97aa3b30837$var$BASE_URL","$e008f97aa3b30837$var$API_KEY","$e008f97aa3b30837$var$countPage","$e008f97aa3b30837$var$searchQuery","$e008f97aa3b30837$var$refs","form","document","querySelector","input","div","loadMoreBtn","$e008f97aa3b30837$var$gallery","$parcel$interopDefault","$5IjG7","$e008f97aa3b30837$var$fetchQuery","$e008f97aa3b30837$var$_fetchQuery","apply","this","arguments","$2TvXO","mark","_callee","params","URLSearchParams","key","q","image_type","orientation","safesearch","per_page","page","$dIxxU","default","get","concat","$e008f97aa3b30837$var$checkQueryResponse","queryResponse","data","hits","length","$h6c0i","Notify","failure","markup","map","param","largeImageURL","webformatURL","views","tags","likes","comments","downloads","join","insertAdjacentHTML","refresh","cardHeight","firstElementChild","getBoundingClientRect","height","window","scrollBy","top","behavior","countImage","info","totalHits","hidden","addEventListener","event","preventDefault","innerHTML","currentTarget","elements","searchQuery","value","trim","then","catch","err"],"version":3,"file":"butLoadMore.ba88d447.js.map"}